{"version":3,"file":"pages/home/index.js","mappings":";;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;AC7GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sources":["webpack://eco-viz-mini/./src/pages/home/index.tsx?7622","webpack://eco-viz-mini/._src_pages_home_index.tsx"],"sourcesContent":["import _regenerator from \"/Users/insentek/WorkSpace/insentek-web/eco-viz-mini-program/eco-viz-mini/node_modules/@babel/runtime/helpers/esm/regenerator.js\";\nimport _asyncToGenerator from \"/Users/insentek/WorkSpace/insentek-web/eco-viz-mini-program/eco-viz-mini/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _slicedToArray from \"/Users/insentek/WorkSpace/insentek-web/eco-viz-mini-program/eco-viz-mini/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport React, { useState, useEffect } from 'react';\nimport { View, Text } from '@tarojs/components';\nimport Taro from '@tarojs/taro';\nimport { checkLoginStatus, clearLoginData } from '../../utils/auth';\nimport './index.scss';\nimport { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nexport default function HomePage() {\n  var _useState = useState(null),\n    _useState2 = _slicedToArray(_useState, 2),\n    userInfo = _useState2[0],\n    setUserInfo = _useState2[1];\n  var _useState3 = useState(true),\n    _useState4 = _slicedToArray(_useState3, 2),\n    loading = _useState4[0],\n    setLoading = _useState4[1];\n  useEffect(function () {\n    loadUserInfo();\n  }, []);\n  var loadUserInfo = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee() {\n      var loginResult, _t;\n      return _regenerator().w(function (_context) {\n        while (1) switch (_context.p = _context.n) {\n          case 0:\n            _context.p = 0;\n            _context.n = 1;\n            return checkLoginStatus();\n          case 1:\n            loginResult = _context.v;\n            if (loginResult.isLoggedIn && loginResult.user) {\n              setUserInfo(loginResult.user);\n            }\n            _context.n = 3;\n            break;\n          case 2:\n            _context.p = 2;\n            _t = _context.v;\n            console.error('获取用户信息失败:', _t);\n          case 3:\n            _context.p = 3;\n            setLoading(false);\n            return _context.f(3);\n          case 4:\n            return _context.a(2);\n        }\n      }, _callee, null, [[0, 2, 3, 4]]);\n    }));\n    return function loadUserInfo() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n  var handleLogout = function handleLogout() {\n    Taro.showModal({\n      title: '确认退出',\n      content: '确定要退出登录吗？',\n      success: function success(res) {\n        if (res.confirm) {\n          clearLoginData();\n          Taro.showToast({\n            title: '已退出登录',\n            icon: 'success'\n          });\n          // 跳转到登录页\n          setTimeout(function () {\n            Taro.redirectTo({\n              url: '/pages/index/index'\n            });\n          }, 1500);\n        }\n      }\n    });\n  };\n  if (loading) {\n    return /*#__PURE__*/_jsx(View, {\n      className: \"home-page\",\n      children: /*#__PURE__*/_jsx(View, {\n        className: \"loading\",\n        children: /*#__PURE__*/_jsx(Text, {\n          children: \"\\u52A0\\u8F7D\\u4E2D...\"\n        })\n      })\n    });\n  }\n  return /*#__PURE__*/_jsxs(View, {\n    className: \"home-page\",\n    children: [/*#__PURE__*/_jsx(View, {\n      className: \"header\",\n      children: /*#__PURE__*/_jsx(Text, {\n        className: \"title\",\n        children: \"\\u9996\\u9875\"\n      })\n    }), /*#__PURE__*/_jsxs(View, {\n      className: \"content\",\n      children: [userInfo && /*#__PURE__*/_jsx(View, {\n        className: \"user-info\",\n        children: /*#__PURE__*/_jsxs(Text, {\n          children: [\"\\u6B22\\u8FCE, \", userInfo.username]\n        })\n      }), /*#__PURE__*/_jsx(View, {\n        className: \"placeholder\",\n        children: /*#__PURE__*/_jsx(Text, {\n          children: \"\\u9996\\u9875\\u5185\\u5BB9\\u5F85\\u5B8C\\u5584\"\n        })\n      })]\n    })]\n  });\n}","import { createPageConfig } from '@tarojs/runtime'\nimport component from \"!!../../../node_modules/@tarojs/taro-loader/lib/entry-cache.js?name=pages/home/index!./index.tsx\"\nvar config = {};\n\n\nvar inst = Page(createPageConfig(component, 'pages/home/index', {root:{cn:[]}}, config || {}))\n\n\nexport default component\n"],"names":[],"sourceRoot":""}