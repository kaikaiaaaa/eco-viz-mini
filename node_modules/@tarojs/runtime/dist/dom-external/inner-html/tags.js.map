{"version":3,"file":"tags.js","sources":["../../../src/dom-external/inner-html/tags.ts"],"sourcesContent":["import { internalComponents, isString } from '@tarojs/shared'\n\nexport function makeMap (\n  str: string,\n  expectsLowerCase?: boolean\n): (key: string) => boolean {\n  const map: Record<string, boolean> = Object.create(null)\n  const list: Array<string> = str.split(',')\n  for (let i = 0; i < list.length; i++) {\n    map[list[i]] = true\n  }\n  return expectsLowerCase ? val => !!map[val.toLowerCase()] : val => !!map[val]\n}\n\nexport const specialMiniElements = {\n  img: 'image',\n  iframe: 'web-view'\n}\n\ninterface SpecialMap {\n  mapName: (props: Record<string, string | boolean>) => string\n}\n\nconst specialElements = new Map<string, SpecialMap>([\n  ['a', {\n    mapName (props) {\n      if (props.as && isString(props.as)) return props.as.toLowerCase()\n      return !props.href || isString(props.href) && (/^javascript/.test(props.href)) ? 'view' : 'navigator'\n    }\n  }],\n])\n\nexport const getSpecialElementMapping = (tag: string, expectsLowerCase:boolean = true) => {\n  tag = expectsLowerCase ? tag.toLowerCase() : tag\n  return specialElements.get(tag)\n}\n\n\nconst internalCompsList = Object.keys(internalComponents)\n  .map(i => i.toLowerCase())\n  .join(',')\n\n// https://developers.weixin.qq.com/miniprogram/dev/component\nexport const isMiniElements = makeMap(internalCompsList, true)\n\n// https://developer.mozilla.org/en-US/docs/Web/HTML/Inline_elements\nexport const isInlineElements = makeMap('i,abbr,iframe,select,acronym,slot,small,span,bdi,kbd,strong,big,map,sub,sup,br,mark,mark,meter,template,canvas,textarea,cite,object,time,code,output,u,data,picture,tt,datalist,var,dfn,del,q,em,s,embed,samp,b', true)\n\n// https://developer.mozilla.org/en-US/docs/Web/HTML/Block-level_elements\nexport const isBlockElements = makeMap('address,fieldset,li,article,figcaption,main,aside,figure,nav,blockquote,footer,ol,details,form,p,dialog,h1,h2,h3,h4,h5,h6,pre,dd,header,section,div,hgroup,table,dl,hr,ul,dt', true)\n\n// specialElements\nexport const isSpecialElements = makeMap('a', true)"],"names":[],"mappings":";;AAEgB,SAAA,OAAO,CACrB,GAAW,EACX,gBAA0B,EAAA;IAE1B,MAAM,GAAG,GAA4B,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,CAAA;IACxD,MAAM,IAAI,GAAkB,GAAG,CAAC,KAAK,CAAC,GAAG,CAAC,CAAA;AAC1C,IAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;QACpC,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,IAAI,CAAA;AACpB,KAAA;AACD,IAAA,OAAO,gBAAgB,GAAG,GAAG,IAAI,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,WAAW,EAAE,CAAC,GAAG,GAAG,IAAI,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAA;AAC/E,CAAC;AAEY,MAAA,mBAAmB,GAAG;AACjC,IAAA,GAAG,EAAE,OAAO;AACZ,IAAA,MAAM,EAAE,UAAU;EACnB;AAMD,MAAM,eAAe,GAAG,IAAI,GAAG,CAAqB;AAClD,IAAA,CAAC,GAAG,EAAE;AACJ,YAAA,OAAO,CAAE,KAAK,EAAA;gBACZ,IAAI,KAAK,CAAC,EAAE,IAAI,QAAQ,CAAC,KAAK,CAAC,EAAE,CAAC;AAAE,oBAAA,OAAO,KAAK,CAAC,EAAE,CAAC,WAAW,EAAE,CAAA;AACjE,gBAAA,OAAO,CAAC,KAAK,CAAC,IAAI,IAAI,QAAQ,CAAC,KAAK,CAAC,IAAI,CAAC,KAAK,aAAa,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC,GAAG,MAAM,GAAG,WAAW,CAAA;aACtG;SACF,CAAC;AACH,CAAA,CAAC,CAAA;AAEW,MAAA,wBAAwB,GAAG,CAAC,GAAW,EAAE,gBAAA,GAA2B,IAAI,KAAI;AACvF,IAAA,GAAG,GAAG,gBAAgB,GAAG,GAAG,CAAC,WAAW,EAAE,GAAG,GAAG,CAAA;AAChD,IAAA,OAAO,eAAe,CAAC,GAAG,CAAC,GAAG,CAAC,CAAA;AACjC,EAAC;AAGD,MAAM,iBAAiB,GAAG,MAAM,CAAC,IAAI,CAAC,kBAAkB,CAAC;KACtD,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,WAAW,EAAE,CAAC;KACzB,IAAI,CAAC,GAAG,CAAC,CAAA;AAEZ;AACa,MAAA,cAAc,GAAG,OAAO,CAAC,iBAAiB,EAAE,IAAI,EAAC;AAE9D;AACa,MAAA,gBAAgB,GAAG,OAAO,CAAC,iNAAiN,EAAE,IAAI,EAAC;AAEhQ;AACa,MAAA,eAAe,GAAG,OAAO,CAAC,8KAA8K,EAAE,IAAI,EAAC;AAE5N;AACa,MAAA,iBAAiB,GAAG,OAAO,CAAC,GAAG,EAAE,IAAI;;;;"}